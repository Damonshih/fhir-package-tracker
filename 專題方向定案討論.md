---
title: 專題方向定案討論

---

# 專題方向定案討論：智慧藥局與居家服藥整合系統 (Smart Pharmacy & Home Adherence)

:::info
**會議重點**：
1.  **方向確認**：鎖定「藥局/藥品管理」場景。
2.  **關鍵變革**：系統需支援「雙模應用」—— 醫院端用 Arduino R4 快速作業，居家端用「手機掃碼」延伸照護。
3.  **核心概念**：一碼雙用 (One Code, Dual Use)。
:::

[TOC]

## 1. 應用場景定案：從醫院到居家的完整迴圈

本專題將實作一套貫穿「發藥」到「服藥」的流程，利用同一個 QR Code 串聯不同裝置：

### A. 醫院/藥局端 (Arduino UNO R4 WiFi)
*   **使用者**：藥師、護理師。
*   **設備**：UNO R4 + 掃碼模組 + LED 矩陣。
*   **功能**：
    *   **快速發藥核對**：掃描藥袋 QR，R4 立即比對處方系統，LED 顯示 ✅ (正確) 或 ❌ (錯誤/過期)。
    *   **庫存扣除**：掃描同時透過 WiFi 呼叫 API 扣除醫院庫存。
    *   **優勢**：實體按鍵與燈號回饋速度快，適合高頻率操作。

### B. 居家/病人端 (Mobile Phone) —— <font color="#d00">本次延伸重點</font>
*   **使用者**：病人、家屬。
*   **設備**：一般智慧型手機 (無需額外 App，使用相機/LINE 掃碼)。
*   **功能**：
    *   **電子仿單 (E-Labeling)**：掃碼自動跳轉網頁，顯示「大字體」的藥品外觀、副作用與服用時間 (取代看不懂的紙本說明書)。
    *   **服藥打卡 (Adherence Log)**：網頁上點擊「我已吃藥」，資料回傳雲端，讓醫院端知道病人依從性。

---

## 2. 手機掃碼功能的延伸設計 (Mobile Extension)

針對老師建議的「手機掃碼延伸」，擬定以下具體實作功能，請老師評估優先級：

### 方案 1：藥品衛教與多媒體說明 (Web Base)
> **實作方式**：QR Code 內容為 URL (如 `http://my-project.com/drug?id=123`)。
*   **延伸功能**：
    *   **語音朗讀**：網頁利用 Text-to-Speech 唸出「早晚飯後吃一顆」，服務視力不佳的長輩。
    *   **影片導引**：若是吸入劑或胰島素，掃碼直接跳出「操作教學影片」。

### 方案 2：LINE Bot 聊天機器人串接
> **實作方式**：QR Code 內容為 LINE Deep Link。
*   **延伸功能**：
    *   掃描後直接加入專題的 LINE Bot。
    *   聊天室自動推播：「現在是早上 8 點，請服用您的血壓藥 (藥號 A01)」。
    *   **優點**：台灣病人對 LINE 接受度最高，互動性最強。

### 方案 3：過期與批號警示
*   **延伸功能**：
    *   當病人在家掃描舊藥袋時，若雲端資料庫顯示該批號已過期或被回收，手機網頁直接跳出紅色警告「此藥品已過期/回收，請勿服用」。

---

## 3. 系統架構與技術細節 (Technical Specs)

為了實現「一碼雙用」，QR Code 的編碼格式將是關鍵。

### QR Code 編碼策略
採用 **URL Parameter** 格式，讓手機看得懂 (開網頁)，Arduino 也能解析 (讀 ID)。
*   **格式範例**：`https://health-project.app/scan?uid=P1001&drug=D05&batch=202512`
*   **手機行為**：直接打開瀏覽器，解析 `uid` 顯示對應衛教頁面。
*   **Arduino 行為**：讀取完整字串 -> 程式擷取 `uid=...` 與 `drug=...` -> 進行內部比對邏輯 -> 控制 LED 顯示。

### 資料庫架構 (Google Sheets / Firebase)
建立一個共用的雲端表格，同步兩端資訊：
| 時間 | 病人ID | 藥品ID | 操作來源 | 狀態 |
| :--- | :--- | :--- | :--- | :--- |
| 09:00 | P001 | D05 | **Arduino (藥局)** | 已發藥 |
| 13:00 | P001 | D05 | **Mobile (居家)** | 病人已服用 |

---

## 4. 即刻執行項目 (Action Items)

不再等待下週，目前立即著手進行：

1.  **QR Code 格式定案**：
    *   [ ] 產生一組測試用的 URL QR Code。
    *   [ ] 寫 Arduino 程式：練習從長網址字串中「切割 (Parse)」出 ID 參數。
2.  **手機端原型 (Mockup)**：
    *   [ ] 使用 HackMD 或簡單 HTML 製作一個「藥品說明範例網頁」，確認手機掃碼後能正確顯示。
3.  **整合測試**：
    *   [ ] 測試 Arduino 掃描 URL QR Code 是否能像掃描純文字一樣順暢 (確認字串長度是否影響讀取速度)。

---

## 5. 待確認問題

1.  **手機端介面**：老師建議手機端只要做「純網頁顯示資訊」就好，還是要做到能「回傳資料 (如：按鈕確認吃藥)」？(後者難度稍高，需處理網頁表單)。
2.  **Arduino 角色**：在藥局端，Arduino 除了掃碼確認，是否需要加入「蜂鳴器」來針對錯誤藥品做聽覺警示？

